# PizzaOrdering-Demo
Built using Node.js, Express.Js, Ejs and MongoDB

##Precondition
1. Make sure node has been installed (https://nodejs.org/download/)
2. Make sure MongoDB has been installed (https://www.mongodb.org/)
3. All the JS modules should be pre-installed and packaged in the zip file. If there are any issues in running the application, Please
   enter command: npm install to ensure all the js modules are up-to-date.

##Instructions to run the project
1. Unzip the file.
2. Open the command line tool (make sure node.js has been installed - https://nodejs.org/download/)
3. IMPORTANT: install mongooese by executing: npm install mongoose --save
   (Mongoose couldn't be packaged in the zip file so you will have to install it before running the app.)
4. Cd into the folder where the files have been unziped.
5. Connect to MongoDB by executing: [location where MongoDB has been installed]/mongod -dbpath=./data
6. Execute the command: npm start
7. Open the browser and type localhost:3000

##Required JS modules

- "body-parser": "~1.13.2",
- "cookie-parser": "~1.3.5",
- "debug": "~2.2.0",
- "ejs": "~2.3.3",
- "express": "~4.13.1",
- "morgan": "~1.6.1",
- "serve-favicon": "~2.3.0",
- "mongoose": "~4.0.8",
- "accounting": "~0.4.1",
- "moment": "~2.10.3"

##Files

- ./data/ - contains files stored in mongo database.
- ./javascripts/
  * calculator.js - module which provides methods to handle the calculations.
  * helpers.js - helper functions used in app.js

- ./json/
  * homePage.json - JSON used to hold the data to generate the home page.
  * orderPage.json - JSON used to hold the data to generate the order page.
  * ordersPage.json - JSON used to hold the data to generate the orders page.
  * pricing.json - JSON used to hold the data for the pricing models.

- ./public/
  * ./bootstrap/ - holds the js and css required to run the project (the first page uses validator.js to validate the input).
  * ./images/ - contains the images used on the site.
  * ./javascripts/
    * listeners.js - javascript that registers the event listeners used on the pages.
  * ./lib/
    * jquery-2.1.3.min.js - version of jquery used to render the page.

- ./models/
  * orders.js - schema used to store each order in the database.

- ./routes/
  * index.js - contains the routes used on the home page.
  * orders.js - contains the routes used on the orders page.

- ./views/
  * error.ejs - sample error page generated by express-generator
  * index.ejs - ejs template for the order page.
  * order.ejs - ejs template for the order page.
  * orders.ejs - ejs template for the orders page.

- app.js - main javascript file to host the pages.

##Pages
- Home Page (http:localhost:3000/):
  * You can place an order by filling in the required info and hit the "place order" button.
  * You can navigate to the orders page by clicking on the "orders" tab in the navbar or the orders link in the confirmation message once an order has been places.

- Orders Page (http:localhost:3000/orders):
  * You can view a list of orders here.
  * You can delete a particular order by clicking on the "delete" button.
  * You can view the details of a particular order by clicking anywhere in the table row.
  * You can navigate to the home page by clicking on the "home" tab in the navbar.

- Order Page (http:localhost:3000/order/:id):
  * You can view the details of a particular order.
  * You can navigate back to the previous page by clicking the "back" button.
  * You can navigate to the home page by clicking on the "home" tab in the navbar.

##REST API's

- GET http://localhost:3000/api/orders
  * Retrieves the entire list of orders.

- GET http://localhost:3000/api/orders/:id
  * Retrieves the order by the specified id.
  * Example:
    * http://localhost:3000/api/orders/55b5294f6f8d07b844b43ea3

- POST http://localhost:3000/api/orders
  * Create a new order.
  * Example:
    * POST http://localhost:3000/api/orders
    ```
    Body: {
      "subtotal": "$12.00",
      "tax": "$1.44",
      "amountDue": "$30.44",
      "createdOn": "2015-07-26 11:37 am",
      "orderInfo": {
        "crust": "Thin",
        "size": "8\"",
        "cheese": "Mazzarella",
        "sauce": "BBQ",
        "quantity": 1,
        "toppings": [
        "Beef"
        ]
      },
      "customerInfo": {
        "name": "Kyle Brovlaski",
        "address": "12 - 32 Water Street, Vancouver, British Columbia, V6B5N4",
        "phoneNumber": "5555555555"
      }
    }
    ```
